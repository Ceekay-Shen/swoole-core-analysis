```
原创内容，转载请注明出处, 谢谢~
```

## 2.4 消息队列

* 进程间通信(IPC)的一种形式
* 消息队列允许进程以消息的形式交换数据
* 消息队列是面向消息的，发送和接受只能是一块完整的消息
* 即可以先入先出读取，也可以安照类型读取

~~~c
typedef struct _swQueue_Data
{
    long mtype; 					 // 接受还是发送消息
    char mdata[sizeof(swEventData)]; // 消息文本数据
} swQueue_data;

typedef struct _swMsgQueue
{
    int blocking;  // 是否阻塞
    int msg_id;    // 消息id
    int flags;     // 标签
    int perms;     // 权限
} swMsgQueue;
~~~


### 基本函数

~~~c
// 创建消息队列
int swMsgQueue_create(swMsgQueue *q, int blocking, key_t msg_key, int perms);
// 设置消息队列是否阻塞
void swMsgQueue_set_blocking(swMsgQueue *q, uint8_t blocking);
// 推入消息
int swMsgQueue_push(swMsgQueue *q, swQueue_data *in, int data_length);
// 弹出消息
int swMsgQueue_pop(swMsgQueue *q, swQueue_data *out, int buffer_length);
// 消息队列状态
int swMsgQueue_stat(swMsgQueue *q, int *queue_num, int *queue_bytes);
// 释放消息队列
int swMsgQueue_free(swMsgQueue *q);
~~~

### 详细讲解

